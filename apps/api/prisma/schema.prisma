datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Vendor {
  id        String    @id @default(cuid())
  name      String  @unique
  category  String?
  invoices  Invoice[]
  createdAt DateTime  @default(now())
}

model Invoice {
  id          String      @id @default(cuid())
  invoiceNo   String      @unique
  vendorId    String
  vendor      Vendor      @relation(fields: [vendorId], references: [id])
  date        DateTime
  dueDate     DateTime?
  status      String
  totalAmount Decimal      @db.Decimal(14,2)
  lineItems   LineItem[]
  payments    Payment[]
  createdAt   DateTime     @default(now())
}

model LineItem {
  id         String   @id @default(cuid())
  invoiceId  String
  invoice    Invoice  @relation(fields: [invoiceId], references: [id])
  description String
  quantity    Int
  unitPrice   Decimal  @db.Decimal(12,2)
}

model Payment {
  id         String   @id @default(cuid())
  invoiceId  String
  invoice    Invoice  @relation(fields: [invoiceId], references: [id])
  paidOn     DateTime
  amount     Decimal  @db.Decimal(14,2)
  method     String?
}
